<html>

<head>
    <title>Obsid {{obs.obsid}}</title>

    <style type="text/css">
        body {
            margin-left: 20px;
            background-color: lightblue;
        }

        * {
            box-sizing: border-box;
        }

        div.border {
            background-color: white;
            padding-left: 10px;
            padding-right: 10px;
            padding-bottom: 5px;
            border-style: solid;
            border-width: 2px;
            border-radius: 10px;
        }

        /* Create three equal columns that floats next to each other */
        .column1 {
            float: left;
            width: 320px;
            padding: 10px;
        }

        .column2 {
            float: left;
            width: 680px;
            padding: 10px;
        }

        .column3 {
            float: left;
            width: 520px;
            padding: 10px;
        }

        /* Clear floats after the columns */
        .row:after {
            content: "";
            display: table;
            clear: both;
        }

        table.single-line {
            border-width: medium;
            border-spacing: 2px;
            border-style: none;
            border-color: gray;
            border-collapse: collapse;
            background-color: white;
        }

        table.single-line th {
            border-width: 2px;
            padding: 2px 3px 2px 3px;
            border-style: inset;
            border-color: gray;
            background-color: white;
        }

        table.single-line td {
            border-width: 2px;
            padding: 2px 3px 2px 3px;
            border-style: inset;
            border-color: gray;
            background-color: white;
        }
    </style>
</head>

<body>

    <div class="column1">

        <div class="border" style="padding: 10px; margin-bottom: .5cm">
            <span id="label" style="font-size:150%; font-weight:bold;">
                {% if obs.obs_prev %}
                <a href="../../../{{obs.obs_prev.report_subdir}}/index.html">
                    Prev</a>
                {% else %}
                None
                {% endif %}
                - {{obs.obsid}} -
                {% if obs.obs_next %}
                <a href="../../../{{obs.obs_next.report_subdir}}/index.html">
                    Next</a>
                {% else %}
                None
                {% endif %}
            </span>
        </div>

        <div class="border" style="float: left; margin-bottom: .5cm;">

            <div>
                <h2>Performance Details</h2>

                <pre>
OBSID <a href="{{MICA_PORTAL}}/{{obs.obsid}}">{{obs.obsid}}</a>
Kalman start: {{obs.kalman_start}}

Manvr angle: {{"{:.2f}".format(obs.manvr_angle)}} deg
{% if obs.manvr_angles_text %}
{{obs.manvr_angles_text }}
{% endif %}

One shot:
 Total: {{"{:.1f}".format(obs.one_shot)}} arcsec
 Pitch, yaw: {{"{:5.1f}".format(obs.one_shot_pitch)}}, {{"{:5.1f}".format(obs.one_shot_yaw)}} arcsec
 {% if obs.aber.status == "OK" %}
 Aber (p,y): {{"{:5.1f}".format(obs.aber.y)}}, {{"{:5.1f}".format(obs.aber.z)}} arcsec
 Total (aber corr'd): {{"{:.1f}".format(obs.one_shot_aber_corrected)}} arcsec
{% else %}
 Aber: {{obs.aber.status}}
{% endif %}

{% if obs.info.d_roll50 %}
OBC vs GND delta roll:
 50%, 95%: {{"{:.2f}".format(obs.info.d_roll50)}}, {{"{:.2f}".format(obs.info.d_roll95)}} arcsec
 End: {{"{:.2f}".format(obs.info.d_roll_end)}} arcsec
{% endif %}

Preceding Observation: {% if obs.obs_prev %}
ObsID <a href="{{MICA_PORTAL}}/{{obs.obs_prev.obsid}}">{{obs.obs_prev.obsid}}</a>
  End roll error = {{"{:.2f}".format(obs.roll_err_prev)}} arcsec
{% else %}
  None
{% endif %}

Next Observation: {% if obs.obs_next %}
ObsID <a href="{{MICA_PORTAL}}/{{obs.obs_next.obsid}}">{{obs.obs_next.obsid}}</a>
{% else %}
  None
{% endif %}
                </pre>
            </div>
        </div>
    </div>

    <div class="column2">
        <div id="rightsmall" class="border"
            style="padding-top: 10px; margin-bottom: .5cm">
            <img src="n_kalman_delta_roll.png" width="635">
        </div>
        <div id="rightsmall" class="border"
            style="padding-top: 10px; margin-bottom: .5cm">
            <img src="centroid_resids_time.png" width="635">
        </div>
    </div>

    <div class="column3">
        <div class="border" style="float: left; margin-bottom: .5cm;">
            <div id="leftsmall">
                <h2>Catalog and visualization of centroid residuals</h2>
                <table class="single-line" style="font-size:12px" align="center">
                    <tr>
                        <th align='right'>Slot</th>
                        <th align='right'>ID</th>
                        <th align='right'>Type</th>
                        <th align='right'>Mag</th>
                        <th align='right'>Yang</th>
                        <th align='right'>Zang</th>
                        <th align='right'>Med Mag</th>
                        <th align='right'>Med DY</th>
                        <th align='right'>Med DZ</th>
                    </tr>
                    {% for row in obs.starcat_summary %}
                    <tr>
                        <td align='right'>{{row["slot"]}}</td>
                        <td align='right'>{{row["id"]}}</td>
                        <td align='right'>{{row["type"]}}</td>
                        <td align='right'>{{"{:.2f}".format(row["mag"])}}</td>
                        <td align='right'>{{"{:.2f}".format(row["yang"])}}</td>
                        <td align='right'>{{"{:.2f}".format(row["zang"])}}</td>
                        <td align='right'>{{"{:.3f}".format(row["median_mag"])}}</td>
                        <td align='right'>{{"{:.2f}".format(row["median_dy"])}}</td>
                        <td align='right'>{{"{:.2f}".format(row["median_dz"])}}</td>
                    </tr>
                    {% endfor %}
                </table>
                <img src="centroid_resids_scatter.png" width="490">
            </div>
        </div>
    </div>

</body>

</html>